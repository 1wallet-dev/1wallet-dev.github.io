<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">1wallet App Integration | One Wallet Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://one-wallet-dev.github.io/docs/App-Integration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1wallet App Integration | One Wallet Docs"><meta data-rh="true" name="description" content="Currently, 1wallet supports app integration via in-browser redirect or embedded iframe (explained below). Demo code is available at https//onewallet-integration.web.app/."><meta data-rh="true" property="og:description" content="Currently, 1wallet supports app integration via in-browser redirect or embedded iframe (explained below). Demo code is available at https//onewallet-integration.web.app/."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://one-wallet-dev.github.io/docs/App-Integration"><link data-rh="true" rel="alternate" href="https://one-wallet-dev.github.io/docs/App-Integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://one-wallet-dev.github.io/docs/App-Integration" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.103c330a.css">
<link rel="preload" href="/assets/js/runtime~main.2d210387.js" as="script">
<link rel="preload" href="/assets/js/main.9a5f82bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/1wallet.png" alt="One WalletLogo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/1wallet.png" alt="One WalletLogo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">One Wallet</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/home">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/one-wallet-dev/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/home">home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/App-Integration">1wallet App Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Call-for-Developers">Call-for-Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Client Security">Client Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Security-Goals">Security Goals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Smart-Contract-References">Smart-Contract-References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Token-Tracking">Token-Tracking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Tutorials">Tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Web-Client:-Data-Stored-Locally">Web-Client:-Data-Stored-Locally</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/App-Integration">1wallet App Integration</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>1wallet App Integration</h1><p>Currently, 1wallet supports app integration via in-browser redirect or embedded iframe (explained below). Demo code is available at <a href="https://github.com/hypnagonia/1wallet-integration-demo" target="_blank" rel="noopener noreferrer">https://github.com/hypnagonia/1wallet-integration-demo</a>. The demo app is hosted at <a href="https://onewallet-integration.web.app/" target="_blank" rel="noopener noreferrer">https://onewallet-integration.web.app/</a>. </p><p>Several other integration methods are being evaluated and implemented. Some of them are discussed in <a href="https://github.com/polymorpher/one-wallet/issues/73" target="_blank" rel="noopener noreferrer">#73</a>. We are also planning to add integrations to common libraries such as via a web3 provider. Note that, since 1wallet requires the user to provide 6-digit (or 12-digit) code from the authenticator for every transaction, the integration flow would require the user to do so at some point in the 1wallet UI. </p><p>This should not be a problem for most apps that work by sending a request to the wallet (i.e. MetaMask) for every transaction. But for a small category of apps that intend to act a wallet (typically by getting a copy of the user&#x27;s private key and initialize a wallet instance in the app), it should be understood that the same thing cannot be done with 1wallet. There is no private key, so there is nothing to load. The local data stored by 1wallet is 64MB, so passing it into your app would be non-trivial if your app intends to act as a wallet.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="redirect">Redirect<a class="hash-link" href="#redirect" title="Direct link to heading">‚Äã</a></h2><p>The simplest way to support 1wallet with your app is through redirect integration. Using this method, your app will need to redirect the user to a URL similar to <code>https://1wallet.crazy.one/auth/[action]?[params=values]</code>, where <code>action</code> and its corresponding <code>params</code> and <code>values</code> are one of the following. The redirect could be through a new browser tab, or a pop up window, so the user does not need to leave your app to complete the flow. The user will have a chance to review your request at their 1wallet UI, and make a decision on whether they would approve or reject your request. In either case, the user would be redirected back to your app at a callback URL you specified in <code>params</code> and <code>values</code>. The state of your request (e.g. approved / rejected, transaction id, user wallet address, and others) will be passed to the the callback URL.  </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="base-url">Base URL<a class="hash-link" href="#base-url" title="Direct link to heading">‚Äã</a></h3><p>Unless otherwise specified, all APIs should have the base URL <code>https://1wallet.crazy.one/auth</code> prepended to the routes. For example, the URL for <code>connect</code> would be <code>https://1wallet.crazy.one/auth/connect</code>. All requests are <code>GET</code> requests. Parameters and values are passed in as query strings. e.g. <code>https://1wallet.crazy.one/auth/connect?caller=Bob&amp;callback=...</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="common-request-parameters">Common Request Parameters<a class="hash-link" href="#common-request-parameters" title="Direct link to heading">‚Äã</a></h3><ul><li><code>caller</code>: URL encoded string (e.g. <code>Tip%20Jar</code>), the name of the app that made the request.</li><li><code>callback</code>: Base64 encoded string, the callback URL which the user would be redirected back to, after they made a decision on whether to approve or reject the request. Example: <code>aHR0cHM6Ly9nb29nbGUuY29t</code> (decodes to <code>https://google.com</code>)</li><li><code>network</code>: (optional) the network the app intends to use. Must be one of &quot;harmony-mainnet&quot; or &quot;harmony-testnet&quot;. In local testing environment you may use &quot;eth-ganache&quot; as well, provided that a local relayer and web client are running with ganache enabled.</li></ul><p>For address-like parameters, hexidecimal checksum is expected (e.g. <code>0x37CCbeAa1d176f77227AEa39BE5888BF8768Bf85</code>) unless otherwise specified. Addresses in bech32 and hexidecimal lowercase formats are also supported, but are not advised.</p><p>All parameters are required, unless otherwise specified as <strong>(optional)</strong>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="common-callback-parameters">Common Callback Parameters<a class="hash-link" href="#common-callback-parameters" title="Direct link to heading">‚Äã</a></h3><ul><li><code>success</code>: 0 or 1, indicates whether the user has rejected (0) or approved (1) the request from the app.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="connect">Connect<a class="hash-link" href="#connect" title="Direct link to heading">‚Äã</a></h3><p>Allows the app to retrieve a 1wallet address owned by the user. Note that, this endpoint does not verify ownership. Technically the user can spoof an address and call the callback URL with any address they want. If your app needs verification of address ownership, you should consider sending a Payment Request or Signing Request (see below sections).</p><p>Endpoint: <code>/connect</code></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="request-parameters">Request Parameters<a class="hash-link" href="#request-parameters" title="Direct link to heading">‚Äã</a></h4><p>None (only common parameters are used)</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="callback-parameters">Callback Parameters<a class="hash-link" href="#callback-parameters" title="Direct link to heading">‚Äã</a></h4><ul><li><code>address</code>: the address of the wallet the user chooses to connect with</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="screenshots">Screenshots<a class="hash-link" href="#screenshots" title="Direct link to heading">‚Äã</a></h4><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/auth-connect.png"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="payment-request">Payment Request<a class="hash-link" href="#payment-request" title="Direct link to heading">‚Äã</a></h3><p>Allows the app to ask the user to send payment to a specific address. The app may optionally specify an address which the user must make the payment from. The payment may be in the form of tokens (ERC-20, ERC-721, ERC-1155).</p><p>Endpoint: <code>/pay</code></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="request-parameters-1">Request Parameters<a class="hash-link" href="#request-parameters-1" title="Direct link to heading">‚Äã</a></h4><ul><li><code>amount</code>: the amount requested, in wei or otherwise lowest divisible unit (if a payment using a token is requested). Example: <code>1000000000000000000</code> (=1.0 ONE)</li><li><code>dest</code>: the address you want the user to make payment to.</li><li><code>from</code>: (optional) the address of the user&#x27;s wallet which the payment <strong>must be</strong> made from. If the user does not have this 1wallet address, the request cannot proceed (thus the user must reject the request). If this parameter is unspecified, the user would be allowed to pick any 1wallet address they own to complete the payment request.</li></ul><p>At this time, payment by token is not supported, but they will be added very soon. You will need to provide the token&#x27;s contract address in the parameter <code>tokenContractAddress</code>. If the token is an NFT, you will also need to specify token ID in <code>tokenId</code> and token type (ERC721 or ERC1155) in <code>tokenType</code>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="callback-parameters-1">Callback Parameters<a class="hash-link" href="#callback-parameters-1" title="Direct link to heading">‚Äã</a></h4><ul><li><code>txId</code>: the transaction id of the payment. The app should verify whether the transaction was successful and whether payment was received. Since a 1wallet does not revert unless the user provides invalid proof (authenticator codes and local partial proofs), you should check the internal calls of the transaction and determine whether the internal call that actually sends the funds was successful and indeed delivered the specified amount of funds to the destination address. Errors are emitted as events. The easiest way to ensure the transaction was successful is to check balances on the destination address.</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="screenshots-1">Screenshots<a class="hash-link" href="#screenshots-1" title="Direct link to heading">‚Äã</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="select-wallet-and-pay">Select wallet and pay<a class="hash-link" href="#select-wallet-and-pay" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/auth-pay-any-wallet.png"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="cannot-find-specified-wallet">Cannot find specified wallet<a class="hash-link" href="#cannot-find-specified-wallet" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/auth-pay-bad-address.png"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="pay-from-specific-address">Pay from specific address<a class="hash-link" href="#pay-from-specific-address" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/auth-pay-specific-address.png"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="user-authorizing-payment-with-authenticator-code">User authorizing payment with authenticator code<a class="hash-link" href="#user-authorizing-payment-with-authenticator-code" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/auth-pay-specific-address-next.png"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="call-request">Call Request<a class="hash-link" href="#call-request" title="Direct link to heading">‚Äã</a></h3><p>Allows the app to ask the user to call a function at a specific contract address using their 1wallet, and optionally send payment to that contract (via the function, which must be payable in this case). The caller (i.e msg.sender) of that function will be the user&#x27;s 1wallet address. </p><p>The function, parameters, and contract address will be shown to the user. The app may provide a human-readable comment to explain to the user what it is trying to do. </p><h4 class="anchor anchorWithStickyNavbar_mojV" id="request-parameters-2">Request Parameters<a class="hash-link" href="#request-parameters-2" title="Direct link to heading">‚Äã</a></h4><ul><li><code>calldata</code>: a base64 encoded stringified JSON object describing the calldata<sup><a><a href="#f1">1</a></a></sup>. The JSON object has three fields:<ul><li><code>method</code>: a string, corresponds to the function&#x27;s signature, for example, <code>commit(bytes32,bytes32,bytes32)</code> is the signature for the smart contract function <code>function commit(bytes32 hash, bytes32 paramsHash, bytes32 verificationHash) external</code>;</li><li><code>parameters</code>: an array of name-value pairs correspond to the parameters of the called function. Using above example, the parameters could be <code>[{&quot;name&quot;:&quot;hash&quot;, &quot;value&quot;:&quot;0x1234...&quot;},{&quot;name&quot;:&quot;paramsHash&quot;, &quot;value&quot;:&quot;0xffff...&quot;},{&quot;name&quot;:&quot;verificationHash&quot;, &quot;value&quot;:&quot;0xffff...&quot;}]</code></li><li><code>comment</code>: (optional) a string, provides a human-readable explanation to show the user what you are asking for.</li></ul></li><li><code>dest</code>: the address of the contract you want to call.</li><li><code>amount</code>: (optional) the amount you want the user to pay to the contract at the same time, in wei. Example: <code>1000000000000000000</code> (=1.0 ONE). If the amount is non-zero, the <code>method</code> on the <code>dest</code> contract must be payable, otherwise the call would be reverted by the <code>dest</code> contract, even though the 1wallet transaction itself would still be successful (while emitting a log indicating the <code>dest</code> contract reverted).  </li><li><code>from</code>: (optional) the address of the user&#x27;s 1wallet which the call <strong>must be</strong> made from. If the user does not have this 1wallet address, the request cannot proceed (thus the user must reject the request). If this parameter is unspecified, the user would be allowed to pick any 1wallet address they own to complete the payment request.</li></ul><a name="f1">[1]</a> Here is an example of `calldata`: `eyJtZXRob2QiOiJyZW5ldyh1aW50MzIsYnl0ZXM0KSIsInBhcmFtZXRlcnMiOlt7Im5hbWUiOiJwZXJpb2QiLCJ2YWx1ZSI6MX0seyJuYW1lIjoic2lnbmF0dXJlIiwidmFsdWUiOiIweDEyMzQ1Njc4In1dLCJjb21tZW50IjoidGVzdGluZyJ9`<h4 class="anchor anchorWithStickyNavbar_mojV" id="callback-parameters-2">Callback Parameters<a class="hash-link" href="#callback-parameters-2" title="Direct link to heading">‚Äã</a></h4><ul><li><code>txId</code>: the transaction id of the call. The app should verify whether the call was successful and whether payment was received. 1wallet does not revert a transaction unless the user provides invalid proof. You should check the internal calls of the transaction, find the related external calls, and determine whether the calls are successful. Two types of events can be emitted from the call. See <a href="https://github.com/polymorpher/one-wallet/blob/daa1c1fca2c63c11f2252c871752bfdeb052e72a/code/contracts/ONEWallet.sol#L513" target="_blank" rel="noopener noreferrer">code</a> for more information: <ul><li><code>event ExternalCallCompleted(address contractAddress, uint256 amount, bytes data, bytes ret)</code>: here, <code>data</code> is the ABI encoded data (with function signatures and parameters) for the call, and <code>ret</code> is the raw data returned by the call in ABI encoded bytes format, according to <a href="https://docs.soliditylang.org/en/v0.8.4/abi-spec.html#function-selector-and-argument-encoding" target="_blank" rel="noopener noreferrer">ABI specification</a>. </li><li><code>event ExternalCallFailed(address contractAddress, uint256 amount, bytes data, bytes ret)</code>: the format is same as above</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="screenshots-2">Screenshots<a class="hash-link" href="#screenshots-2" title="Direct link to heading">‚Äã</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="request-details">Request Details<a class="hash-link" href="#request-details" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/call.png"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="user-authorizing-request">User Authorizing Request<a class="hash-link" href="#user-authorizing-request" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/call-confirm.png"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="signing-request">Signing Request<a class="hash-link" href="#signing-request" title="Direct link to heading">‚Äã</a></h3><p>Allows the app the ask the user to sign a message using their 1wallet. You may choose whether to add standard Ethereum signed message header to the message (see <a href="https://eips.ethereum.org/EIPS/eip-191" target="_blank" rel="noopener noreferrer">EIP-191</a>). The signature will be verifiable using <code>isValidSignature(bytes32,bytes)</code> method on 1wallet&#x27;s contract, as described in <a href="https://eips.ethereum.org/EIPS/eip-1271" target="_blank" rel="noopener noreferrer">EIP-1271</a>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="request-parameters-3">Request Parameters<a class="hash-link" href="#request-parameters-3" title="Direct link to heading">‚Äã</a></h4><ul><li><code>message</code>: a base64 encoded string of the message itself (not including the EIP-191 header)</li><li><code>raw</code>: (optional, defaults to false) a boolean string (<code>0</code> or <code>false</code> indicates false value) indicating whether standard signing header (EIP-191) should be prepended to the message or not. If the value is true, the header would not be prepended</li><li><code>duration</code> (optional) how long the signature should remain valid, in milliseconds. If unspecified, the signature will remain valid permanently.</li><li><code>from</code>: (optional) the address of the user&#x27;s 1wallet which the signing <strong>must be</strong> done from. If the user does not have this 1wallet address, the request cannot proceed (thus the user must reject the request). If this parameter is unspecified, the user would be allowed to pick any 1wallet address they own to complete the payment request.</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="callback-parameters-3">Callback Parameters<a class="hash-link" href="#callback-parameters-3" title="Direct link to heading">‚Äã</a></h4><ul><li><code>hash</code>: the 32-byte keccak256 hash of the message (with or without header) which you provided, in hexidecimal representation (0x...)</li><li><code>signature</code>: the 32-byte signature of the 1wallet corresponds to the message, such that <code>isValidSignature(hash, signature)</code> call on the 1wallet address will return true before the signature expires (valid for the duration you specified)</li><li><code>txId</code>: the transaction id of the call. Again, a successful transaction does not indicate 1wallet succesfully recorded the signature. You should call <code>isValidSignature(hash, signature)</code> on the 1wallet to verify the signature is indeed valid, and optionally calling <code>lookupSignature(hash)</code> to check the expiry time. You could also use <code>listSignatures(start, end)</code> to show all the signatures on the 1wallet for debugging. If things went wrong, you could check the internal calls of the transaction and identify the relevant external calls to determine the cause. Possible events for a signing request are provided in <a href="https://github.com/polymorpher/one-wallet/blob/daa1c1fca2c63c11f2252c871752bfdeb052e72a/code/contracts/SignatureManager.sol#L5" target="_blank" rel="noopener noreferrer">this section of the code</a></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="screenshots-3">Screenshots<a class="hash-link" href="#screenshots-3" title="Direct link to heading">‚Äã</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="request-details-1">Request Details<a class="hash-link" href="#request-details-1" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/sign.png"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="user-authorizing-request-1">User Authorizing Request<a class="hash-link" href="#user-authorizing-request-1" title="Direct link to heading">‚Äã</a></h5><p><img src="https://raw.githubusercontent.com/polymorpher/one-wallet/master/wiki/images/sign-confirm.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/App-Integration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/home"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">home</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Call-for-Developers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Call-for-Developers</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#redirect" class="table-of-contents__link toc-highlight">Redirect</a><ul><li><a href="#base-url" class="table-of-contents__link toc-highlight">Base URL</a></li><li><a href="#common-request-parameters" class="table-of-contents__link toc-highlight">Common Request Parameters</a></li><li><a href="#common-callback-parameters" class="table-of-contents__link toc-highlight">Common Callback Parameters</a></li><li><a href="#connect" class="table-of-contents__link toc-highlight">Connect</a></li><li><a href="#payment-request" class="table-of-contents__link toc-highlight">Payment Request</a></li><li><a href="#call-request" class="table-of-contents__link toc-highlight">Call Request</a></li><li><a href="#signing-request" class="table-of-contents__link toc-highlight">Signing Request</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/home">Home</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/one-wallet-dev/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 One Wallet. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2d210387.js"></script>
<script src="/assets/js/main.9a5f82bc.js"></script>
</body>
</html>